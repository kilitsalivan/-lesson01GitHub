(()=>{"use strict";const e=()=>{const e=document.querySelectorAll("[name=user_name]"),t=document.querySelectorAll("[name=user_message]"),o=document.querySelectorAll("[name=user_email]"),n=document.querySelectorAll("[name=user_phone]"),l=e=>{e.addEventListener("input",(e=>{let t=e.target;"email"===t.type?t.value=t.value.replace(/[^a-zA-Z\@\_\-\.\!\~\*\']/,""):"tel"===t.type?t.value=t.value.replace(/[^0-9+]/gi,""):"text"===t.type&&"user_message"===t.name?t.value=t.value.replace(/[^а-яА-ЯЁё\.\,\;\:\!\?\-\(\)\ ]/,""):t.value=t.value.replace(/[^а-яА-ЯЁё\ ]/,"")}))};e.forEach((e=>{l(e)})),t.forEach((e=>{l(e)})),o.forEach((e=>{l(e),e.setAttribute("required",!0)})),n.forEach((e=>{l(e)}));const c=(e,t)=>{e.value.match(t)&&(e.value=e.value.replace(t,""))},r=e=>{e.value=e.value.replace(/\s+/g," "),e.value=e.value.replace(/\-+/g,"-");let t=new RegExp(e.value);/^[/ /-]/.test(t)&&(e.value=e.value.replace(/^[/ /-]/,"")),/[/ /-]$/.test(t)&&(e.value=e.value.replace(/[/ /-]$/,""))};e.forEach((e=>{e.addEventListener("blur",(()=>{c(e,/[^а-яА-ЯЁё\-\ ]/),r(e),e.value=(e=>e.value.split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "))(e)}))})),t.forEach((e=>{e.addEventListener("blur",(()=>{r(e)}))})),o.forEach((e=>{e.addEventListener("blur",(()=>{c(e,/[^a-zA-Z\@\_\-\.\!\~\*\']/),r(e)}))})),document.getElementById("calc").addEventListener("input",(e=>{let t=e.target;"text"===t.type&&(t.value=t.value.replace(/\D/g,""))}))},t=e=>{const t=document.getElementById(e),o=document.createElement("div");o.style.cssText="font-size: 2rem; color: white;",t.addEventListener("submit",(l=>{l.preventDefault(),t.appendChild(o),o.textContent="Загрузка...";const c=new FormData(t);n(Object.fromEntries(c)).then((t=>{if(200!==t.status)throw new Error("status network not 200");var n;o.textContent="Cпасибо! Мы скоро с вами свяжемся!",n=e,[...document.getElementById(n).elements].filter((e=>"button"!==e.tagName.toLowerCase()&&"button"!==e.type)).forEach((e=>e.value="")),setTimeout((()=>{o.textContent="",document.querySelector(".popup").style.display="none"}),3e3)})).catch((e=>{o.textContent="Что то пошло не так...",console.error(e),setTimeout((()=>{o.textContent="",document.querySelector(".popup").style.display="none"}),3e3)}))}));const n=e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})};(function(e){let t,o=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),l=document.querySelector("#timer-seconds");t=setInterval((function(){let e=function(){let e=(new Date("12 May 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60%24),minutes:o,seconds:t}}();o.textContent=e.hours<10?`0${e.hours}`:e.hours,n.textContent=e.minutes<10?`0${e.minutes}`:e.minutes,l.textContent=e.seconds<10?`0${e.seconds}`:e.seconds,(e.hours<0||e.minutes<0||e.seconds<0)&&(o.textContent="00",n.textContent="00",l.textContent="00")}),1e3)})(),(()=>{const e=document.querySelector("body"),t=document.querySelector("menu");e.addEventListener("click",(e=>{let o=e.target;o.closest(".menu")||o.closest(".close-btn")?t.classList.toggle("active-menu"):o.closest("ul>li")?t.classList.remove("active-menu"):o=o.closest(".active-menu"),o||t.classList.remove("active-menu")}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn");o.forEach((o=>{o.addEventListener("click",(()=>{let o=document.documentElement.clientWidth;e.style.display="block",o>768&&(({timing:e,draw:t,duration:o})=>{let n=performance.now();requestAnimationFrame((function l(c){let r=(c-n)/o;r>1&&(r=1);let a=e(r);t(a),r<1&&requestAnimationFrame(l)}))})({duration:500,timing:e=>e,draw(e){t.style.left=43*e+"%"}})}))})),window.addEventListener("resize",(()=>{document.documentElement.clientWidth<768&&(e.style.display="none",t.style.left="")}),!1),e.addEventListener("click",(o=>{let n=o.target;n.closest(".popup-close")?(e.style.display="none",t.style.left=""):(n=n.closest(".popup-content"),n||(e.style.display="none",t.style.left=""))}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,l)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(l)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelectorAll(".dot")),o=document.querySelector(".portfolio-dots"),n=document.querySelector(".portfolio-content");let l,c=0;for(let e=0;e<t.length;e++)t[e].remove();(()=>{for(let t=0;t<e.length;t++){let e=document.createElement("li");e.classList.add("dot"),o.appendChild(e)}o.children[0].classList.add("dot-active")})();const r=document.querySelectorAll(".dot"),a=(e,t,o)=>{e[t].classList.remove(o)},s=(e,t,o)=>{e[t].classList.add(o)},u=()=>{a(e,c,"portfolio-item-active"),a(r,c,"dot-active"),c++,c>=e.length&&(c=0),s(e,c,"portfolio-item-active"),s(r,c,"dot-active")},i=(e=3e3)=>{l=setInterval(u,e)};n.addEventListener("click",(t=>{t.preventDefault();let o=t.target;o.matches(".portfolio-btn,.dot")&&(a(e,c,"portfolio-item-active"),a(r,c,"dot-active"),o.matches("#arrow-right")?c++:o.matches("#arrow-left")?c--:o.matches(".dot")&&r.forEach(((e,t)=>{e===o&&(c=t)})),c>=e.length&&(c=0),c<0&&(c=e.length-1),s(e,c,"portfolio-item-active"),s(r,c,"dot-active"))})),n.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(l)})),n.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&i()})),i(1500)})(),(()=>{const e=document.getElementById("command"),t=e=>{let t=e.target;if(t.classList.contains("command__photo")){const e=t.src;t.src=t.dataset.img,t.dataset.img=e}};e.addEventListener("mouseover",t),e.addEventListener("mouseout",t)})(),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),l=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),r=document.getElementById("total");t.addEventListener("change",(t=>{const a=t.target;(a.matches("select")||a.matches("input"))&&(()=>{let t=0,a=1,s=1;const u=o.options[o.selectedIndex].value,i=+n.value;c.value>1&&(a+=(c.value-1)/10),l.value&&l.value<5?s*=2:l.value&&l.value<10&&(s*=1.5),u&&i&&(t=e*u*i*a*s),r.textContent=Math.round(t)})()}))})(),e(),t("form1"),t("form2"),t("form3")})();